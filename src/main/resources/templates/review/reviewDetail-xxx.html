<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header :: header">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>

<body>

<div th:replace="fragments/bodyHeader :: bodyHeader"/>

<main>
    <div class="content inner">
        <section>
            <table class="tb tb_row" width="900" border="1" cellpadding="100">
                <colgroup>
                    <col style="width:10%;" /><col style="width:23%;" /><col style="width:10%;" /><col style="width:23%;" />
                </colgroup>
                <tbody>
                <tr>
                    <th scope="row">글 유형</th>
                    <td th:text="${post.noticeYn == false ? '일반' : '공지'}"></td>

                    <th scope="row">등록일</th>
                    <td th:text="${#temporals.format( post.createdAt, 'yyyy-MM-dd HH:mm' )}"></td>
                </tr>
                <tr>
                    <th scope="row">제목</th>
                    <td>[[ ${post.title} ]]</td>

                    <th scope="row">조회</th>
                    <td colspan="3">[[ ${post.viewCnt} ]]</td>
                </tr>
                <tr>
                    <th scope="row">이름</th>
                    <td colspan="3">[[ ${post.memberId} ]]</td>
                </tr>
                <tr>
                    <th scope="row">식당</th>
                    <td colspan="3">[[ ${post.shopId} ]]</td>
                </tr>
                <tr>
                    <th scope="row">내용</th>
                    <td colspan="3">[[ ${post.content} ]]</td>
                </tr>
                </tbody>
            </table>
            <p class="btn_set">
                <a th:href="@{/review/new( boardId=${post.boardId} )}" class="btns btn_bdr4 btn_mid">수정</a>
                <button type="button" onclick="deletePost();" class="btns btn_bdr1 btn_mid">삭제</button>
                <a th:href="@{/review/list}" class="btns btn_bdr3 btn_mid">목록</a>
            </p>
        </section>
    </div> <!--/* .content */-->
</main>


<div class="inner">
    <div th:replace="fragments/footer :: footer"/>
</div>

<script th:src="@{/js/function.js}"></script>
<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
<script th:src="@{/js/common.js}"></script>
<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
<script th:inline="javascript">
        /*<![CDATA[*/

            // 게시글 삭제
            function deletePost() {
                const boardId = [[ ${post.boardId} ]];

                if ( !confirm(boardId + '번 게시글을 삭제할까요?') ) {
                    return false;
                }

                const formHtml = `
                    <form id="deleteForm" action="/review/${boardId}" method="post">
                        <input type="hidden" id="boardId" name="boardId" value="${boardId}" />
                    </form>
                `;
                console.log(formHtml);

                const doc = new DOMParser().parseFromString(formHtml, 'text/html');
                const form = doc.body.firstChild;
                document.body.append(form);
                document.getElementById('deleteForm').submit();
            }

        /*]]>*/

        </script>
</body>
</html>